function event(e,t,a){sendAnalytics&&ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:a})}function valueEvent(e,t,a,n){sendAnalytics&&ga("send",{hitType:"event",eventCategory:e,eventAction:a,eventLabel:t,eventValue:n})}function noninteractionEvent(e,t){sendAnalytics&&ga("send",{hitType:"event",eventCategory:e,eventAction:action,eventLabel:t,nonInteraction:1})}function buttonEvent(e){event("button","click",e)}function linkEvent(e){event("link","click",e)}function dialogEvent(e){event("dialog","trigger",e)}function dialogButton(e){event("dialog","action",e)}function tabEvent(e){event("tab","switch",e)}function themeEvent(e,t){event("theme",e,t)}function settingEvent(e,t){event("setting",e,t)}function getSetting(e,t){chrome.storage.sync.get(e,function(e){t(e)})}function getStartpage(e){getSetting("startupmode",function(t){void 0===t.startupmode&&chrome.storage.sync.set({startupmode:"all-themes"}),e(t.startupmode)})}function checkAnalyticsOptout(e){getSetting("analyticsoptout",function(t){void 0===t.analyticsoptout&&chrome.storage.sync.set({analyticsoptout:!1}),e(t.analyticsoptout)})}function setFaves(e){chrome.storage.sync.set({favorites:e})}function getFaves(e){getSetting("favorites",function(t){void 0===t.favorites&&setFaves(""),e(t.favorites)})}function checkFaved(e,t){getFaves(function(a){var n=a.split(" ");t(n.indexOf(e)>-1)})}function addFave(e){getFaves(function(t){var a=t+" "+e;a=a.trim(),setFaves(a),themeEvent("add-fave",e)})}function removeFave(e){getFaves(function(t){t=t.replace(e+" ",""),t=t.replace(e,""),setFaves(t.trim()),themeEvent("remove-fave",e)})}function toggleFave(e){checkFaved(e,function(t){if(t){removeFave(e);"faves"===$("menu li.active").data("target")&&($("#theme-"+e).hide(),0===$(".theme-block.theme-faved").length&&$("#no-faves").show())}else addFave(e)})}function clearFaves(){setFaves("")}function setShowUpdatev2Dialog(e){chrome.storage.sync.set({showUpdatev2Dialog:e})}function getShowUpdatev2Dialog(e){getSetting("showUpdatev2Dialog",function(t){void 0===t.showUpdatev2Dialog?setShowUpdatev2Dialog(!1):e(t.showUpdatev2Dialog)})}function prepPage(){chrome.tabs.executeScript(null,{file:"target_page/inject.js"},function(){void 0!=chrome.runtime.lastError&&(dialogEvent("page-not-allowed"),$("#page-not-allowed").show())})}function setTheme(e){var t=chrome.extension.getURL("themes/"+e+".css");chrome.tabs.executeScript(null,{code:'document.getElementById("bootswatch-style").setAttribute("href", "'+t+'");\nvar originalSheet=document.getElementById("original-stylesheet");\nif (originalSheet!=null) { originalSheet.disabled = true; }\ndocument.getElementById("last-theme").value = \''+e+"';\ncacheControl();"}),$("#download").attr("href","https://bootswatch.com/4/"+e+"/bootstrap.min.css").data("galabel","Download: "+e),checkFaved(e,function(e){e?$("#favorite i").addClass("md-favorite").removeClass("md-favorite-outline"):$("#favorite i").removeClass("md-favorite").addClass("md-favorite-outline")})}function clearTheme(){chrome.tabs.executeScript(null,{file:"target_page/reset.js"}),$(".theme-icon.active").toggleClass("active"),$("#theme-specific-actions .button").addClass("disabled"),chrome.tabs.executeScript(null,{code:"document.getElementById(\"last-theme\").value = '';"})}function loadThemes(){$("#no-bootstrap").hide(),$("#theme-actions").show();for(var e in themes)e=themes[e],$("#themes").append('<div class="theme-block" id="theme-'+e+'" data-theme="'+e+'"><div class="theme-icon"><span>Sample</span><div class="color primary"></div><div class="color color-half success"></div><div class="color color-half info"></div><div class="color color-half warning"></div><div class="color color-half danger"></div></div><div class="theme-name">'+e+"</div></div>");$(".theme-block").click(function(){var e=$(this).data("theme");setTheme(e),$(".theme-icon.active").toggleClass("active"),$(this).find(".theme-icon").toggleClass("active"),$("#theme-specific-actions .button").removeClass("disabled"),themeEvent("apply",e)}).each(function(){var e=$(this).data("theme");checkFaved(e,function(t){t&&$("#theme-"+e).addClass("theme-faved")})}),getStartpage(function(e){if("favorites"==e){"section-themes"!==$("section.active").attr("id")&&$("section.active").removeClass("active"),$("#section-themes").addClass("active"),$("#theme-actions").show(),$("#themes .theme-block:not(.theme-faved)").hide(),$("menu ul li[data-target=themes]").removeClass("active"),$("menu ul li[data-target=faves]").addClass("active"),0===$(".theme-block.theme-faved").length&&$("#no-faves").show(),$("#startup-select :nth-child(2)").prop("selected",!0)}}),checkAnalyticsOptout(function(e){$("#card-analytics input[type=checkbox]").prop("checked",e)})}function snackbar(e){$("#snackbar").hasClass("open")?($("#snackbar").text(e),clearTimeout(closeSnackbar),closeSnackbar=setTimeout(function(){$("#snackbar").removeClass("open")},3e3)):(setTimeout(function(){$("#snackbar").text(e).addClass("open")},500),closeSnackbar=setTimeout(function(){$("#snackbar").removeClass("open")},3e3))}!function(e,t,a,n,o,s,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(a),i=t.getElementsByTagName(a)[0],s.async=1,s.src=n,i.parentNode.insertBefore(s,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-37203159-4","auto"),ga("set","checkProtocolTask",function(){}),ga("require","displayfeatures");var themes=["cerulean","cosmo","cyborg","darkly","flatly","journal","litera","lumen","lux","materia","minty","pulse","sandstone","simplex","sketchy","slate","solar","spacelab","superhero","united","yeti"],sendAnalytics=!0;checkAnalyticsOptout(function(e){sendAnalytics=!e}),sendAnalytics&&ga("send","pageview","/popup.html");var closeSnackbar=null;$(document).ready(function(){prepPage(),$(".dialog").hide(),$("a").click(function(){var e=$(this).attr("href"),t=$(this).data("galabel")?$(this).data("galabel"):$(this).text();if("#"!==e)return linkEvent(t),chrome.tabs.create({url:$(this).attr("href")}),!1}),getShowUpdatev2Dialog(function(e){e&&(dialogEvent("update-v2"),$("#update-v2").show())}),chrome.runtime.onMessage.addListener(function(e){if("bootstrapStatus"===e.method){var t="true"===e.title;loadThemes(),t||($("#no-bootstrap").show(),dialogEvent("no-bootstrap"))}"themeAlreadySet"===e.method&&($("#no-bootstrap").hide(),""!==e.title&&($("#theme-"+e.title+" .theme-icon").addClass("active"),$("#theme-specific-actions .button").removeClass("disabled"),checkFaved(e.title,function(e){e&&$("#favorite i").addClass("md-favorite").removeClass("md-favorite-outline")})))}),$("#load-anyway").click(function(){$("#reset,#theme-actions").show(),$("#no-bootstrap").hide(),dialogButton("no-bootstrap: continue")}),$("#load-anyway-cancel").click(function(){clearTheme(),dialogButton("no-bootstrap: cancel"),window.close()}),$("#not-allowed-close").click(function(e){window.close()}),$("#update-v2-close").click(function(){setShowUpdatev2Dialog(!1),dialogButton("update-v2: close"),$("#update-v2").hide()}),$("#reset").click(function(){clearTheme(),themeEvent("reset","")}),$("#hamburger").click(function(){$("menu").toggleClass("open"),$("#menu-shade").fadeIn()}),$("#menu-shade").click(function(){$("menu").toggleClass("open"),$("#menu-shade").fadeOut()}),$("menu ul li:not([data-target=faves]):not(.menu-divider)").click(function(){$("section.active").removeClass("active"),$("#themes .theme-block").show(),$("#no-faves").hide(),$("menu ul li.active").removeClass("active"),$(this).addClass("active");var e=$(this).data("target");$("section#section-"+e).addClass("active"),$("menu").toggleClass("open"),$("#menu-shade").fadeOut(),"themes"!==e?$("#theme-actions").hide():$("#theme-actions").show(),tabEvent(e)}),$("menu ul li[data-target=faves]").click(function(){"section-themes"!==$("section.active").attr("id")&&$("section.active").removeClass("active"),$("#section-themes").addClass("active"),$("#theme-actions").show(),$("#themes .theme-block:not(.theme-faved)").hide(),$("menu ul li.active").removeClass("active"),$(this).addClass("active"),$("menu").toggleClass("open"),$("#menu-shade").fadeOut(),0===$(".theme-block.theme-faved").length&&$("#no-faves").show(),tabEvent("faves")}),$("#favorite").click(function(){var e=$(".theme-block .theme-icon.active").parent(),t=e.data("theme");e.toggleClass("theme-faved"),toggleFave(t),$("#favorite i").toggleClass("md-favorite").toggleClass("md-favorite-outline"),$("menu ul li[data-target=faves]").hasClass("active")&&$("#theme-specific-actions .button").addClass("disabled")}),$("#fave-clear").click(function(){$("#fave-clear-verify").show(),dialogEvent("clear-faves")}),$("#fave-clear-no").click(function(){$("#fave-clear-verify").hide(),dialogButton("clear-faves: no")}),$("#fave-clear-yes").click(function(){clearFaves(),$("#fave-clear-verify").hide(),$(".theme-block.theme-faved").removeClass("theme-faved"),snackbar("Favorites Cleared!"),dialogButton("clear-faves: yes")}),$("#startup-select").change(function(){var e=$(this).val().toLowerCase().replace(" ","-");chrome.storage.sync.set({startupmode:e}),settingEvent("startup",e)}),$("#card-analytics input[type=checkbox]").change(function(e){var t=$(this).prop("checked");chrome.storage.sync.set({analyticsoptout:t}),settingEvent("analytics opt out",t?"enable":"disable"),sendAnalytics=!t})});